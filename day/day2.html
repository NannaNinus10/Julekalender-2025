<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8">
  <title>LÃ¥ge 2 â€“ Memory Spil</title>
  <link rel="stylesheet" href="../style.css">
  <style>
    /* Boks omkring memory-spillet */
    .content-box {
      background-color: white;
      padding: 20px;
      border-radius: 12px;
      max-width: 700px;
      margin: 50px auto;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      text-align: center;
    }

    /* Memory spil specifik CSS */
    .memory-container {
      display: grid;
      grid-template-columns: repeat(4, 120px);
      gap: 15px;
      justify-content: center;
      margin-top: 20px;
    }

    .card {
      width: 120px;
      height: 120px;
      perspective: 1000px;
      cursor: pointer;
    }

    .card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      text-align: center;
      transition: transform 0.6s;
      transform-style: preserve-3d;
    }

    .card.flipped .card-inner {
      transform: rotateY(180deg);
    }

    .card-front, .card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 10px;
    }

    .card-front {
      transform: rotateY(180deg); /* fronten starter gemt */
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .card-back {
      transform: rotateY(0deg); /* bagkortet starter synligt */
    }

    .card img {
      width: 100%;
      height: 100%;
      border-radius: 10px;
    }

    /* Besked nÃ¥r spillet er vundet */
    #winMessage {
  display: none;
  font-size: 2rem;
  color: #d6336c;
  margin: 10px 0 20px 0; /* top, hÃ¸jre, bund, venstre */
  text-shadow: 2px 2px 6px #aaa;
  transform: scale(0);
  transition: transform 0.5s ease;
  text-align: center;
}

  </style>
</head>
<body>
  <h1>GlÃ¦delig 2. december â€“ Memory Spil</h1>

  <div class="content-box">
    <p>Find de matchende julekort!</p>

    <!-- Memory container -->
    <div class="memory-container" id="memoryContainer"></div>

    <!-- Sej besked ved alle par fundet -->
    <p id="winMessage">ðŸŽ‰ Godt klaret! ðŸŽ‰</p>

    <!-- Tilbage til kalenderen -->
    <p>
      <a href="../index.html" class="back-button">â¬… Tilbage til kalenderen</a>
    </p>
  </div>

  <script>
    const images = [
      "../assets/candy.svg",
      "../assets/cinnamon.svg",
      "../assets/gingerbread.svg",
      "../assets/nissehue.svg",
      "../assets/orange.svg",
      "../assets/present.svg",
      "../assets/snowflake.svg",
      "../assets/star.svg"
    ];

    const cardBackSrc = "../assets/card-back.svg";

    let cardImages = [...images, ...images]; // dobbelt op for par
    cardImages.sort(() => 0.5 - Math.random());

    const memoryContainer = document.getElementById("memoryContainer");
    let firstCard = null;
    let secondCard = null;
    let lockBoard = false;

    let matchesFound = 0;
    const totalPairs = images.length;

    cardImages.forEach(src => {
      const card = document.createElement("div");
      card.classList.add("card");

      const cardInner = document.createElement("div");
      cardInner.classList.add("card-inner");

      const cardFront = document.createElement("div");
      cardFront.classList.add("card-front");
      const imgFront = document.createElement("img");
      imgFront.src = src;
      cardFront.appendChild(imgFront);

      const cardBack = document.createElement("div");
      cardBack.classList.add("card-back");
      const imgBack = document.createElement("img");
      imgBack.src = cardBackSrc;
      cardBack.appendChild(imgBack);

      cardInner.appendChild(cardBack);   // fÃ¸rst bagkortet
      cardInner.appendChild(cardFront);  // derefter frontkortet
      card.appendChild(cardInner);
      memoryContainer.appendChild(card);

      card.addEventListener("click", () => {
        if(lockBoard || card === firstCard) return;
        card.classList.add("flipped");

        if(!firstCard) {
          firstCard = card;
          return;
        }

        secondCard = card;
        lockBoard = true;

        const firstImg = firstCard.querySelector(".card-front img").src;
        const secondImg = secondCard.querySelector(".card-front img").src;

        if(firstImg === secondImg) {
          matchesFound++;
          resetBoard();

          if(matchesFound === totalPairs) {
            showWinMessage();
          }
        } else {
          setTimeout(() => {
            firstCard.classList.remove("flipped");
            secondCard.classList.remove("flipped");
            resetBoard();
          }, 1000);
        }
      });
    });

    function resetBoard() {
      [firstCard, secondCard] = [null, null];
      lockBoard = false;
    }

    function showWinMessage() {
      const msg = document.getElementById("winMessage");
      msg.style.display = "block";
      setTimeout(() => {
        msg.style.transform = "scale(1)";
      }, 50);
    }
  </script>
</body>
</html>
