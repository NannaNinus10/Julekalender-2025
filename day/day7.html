<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="UTF-8">
<title>LÃ¥ge 7 â€“ Julegave Sortering</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #204226;
    margin: 0;
    padding: 0;
    color: white;
    text-align: center;
  }

  .content-box {
    background-color: white;
    color: black;
    padding: 20px;
    border-radius: 12px;
    max-width: 500px;
    margin: 40px auto;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    position: relative;
  }

  #gameArea {
    position: relative;
    width: 400px;
    height: 400px;
    margin: 0 auto;
    overflow: hidden;
  }

  /* Baggrund og front */
  #maskineBaggrund, #maskineFront {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
  }

  /* Gaver */
  .gift {
    position: absolute;
    top: 200px; /* Y-vÃ¦rdi for bÃ¥nd */
    height: auto;
    z-index: 1; /* gaver mellem baggrund og front */
  }

  /* SÃ¦kke */
  .sack {
    position: absolute;
    bottom: 10px;
    cursor: pointer;
    z-index: 3; /* ovenpÃ¥ fronten */
    width: 70px;
    height: 95px;
  }

  /* Tilbage-knap */
  .back-button {
    display: inline-block;
    margin-top: 20px;
    padding: 10px 16px;
    background-color: #204226;
    color: white;
    text-decoration: none;
    border-radius: 8px;
    font-weight: bold;
  }
  .back-button:hover {
    background-color: #35663c;
  }

  #endScreen {
    display: none;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #204226;
    color: white;
    padding: 15px 20px;
    border-radius: 8px;
    font-weight: bold;
    z-index: 5;
  }

</style>
</head>
<body>
<h1>GlÃ¦delig 7. december â€“ Sorter julegaverne!</h1>

<div class="content-box">
  <div id="gameArea">
    <!-- Baggrund bag gaverne -->
    <img id="maskineBaggrund" src="assets/sorterMaskineBag.svg" alt="Baggrund">

    <!-- Gaverne kommer her -->
    
    <!-- Front ovenpÃ¥ gaverne -->
    <img id="maskineFront" src="assets/sorterMaskineFront.svg" alt="Maskine front">

    <!-- SÃ¦kke som knapper -->
    <img id="sackBlÃ¥" class="sack" src="assets/sorterBlÃ¥SÃ¦k.svg" style="left:10px;">
    <img id="sackRÃ¸d" class="sack" src="assets/sorterRÃ¸dSÃ¦k.svg" style="left:110px;">
    <img id="sackGul" class="sack" src="assets/sorterGulSÃ¦k.svg" style="left:210px;">
    <img id="sackGrÃ¸n" class="sack" src="assets/sorterGrÃ¸nSÃ¦k.svg" style="left:310px;">

    <div id="endScreen"></div>
  </div>

  <p><a href="../index.html" class="back-button">â¬… Tilbage til kalenderen</a></p>
</div>

<script>
const giftData = [];
const colors = ['BlÃ¥','RÃ¸d','Gul','GrÃ¸n'];

// Opret 16 gaver (4 farver x 4 stÃ¸rrelser)
colors.forEach(color => {
  for(let i=1;i<=4;i++){
    giftData.push({
      src: `assets/sorter${color}${i}.svg`,
      color: color.toLowerCase(),
      width: 0, // vi sÃ¦tter inline i JS
      height: 0
    });
  }
});

// Shuffle gaver
function shuffle(array){
  return array.sort(()=>Math.random()-0.5);
}
shuffle(giftData);

const gameArea = document.getElementById('gameArea');
const endScreen = document.getElementById('endScreen');
let score=0;
let currentGiftIndex=0;

const sackMap = {
  blÃ¥: document.getElementById("sackBlÃ¥"),
  rÃ¸d: document.getElementById("sackRÃ¸d"),
  gul: document.getElementById("sackGul"),
  grÃ¸n: document.getElementById("sackGrÃ¸n")
};

// Opret en gave ad gangen
function spawnGift(){
  if(currentGiftIndex>=giftData.length){
    endGame();
    return;
  }
  const giftInfo = giftData[currentGiftIndex];
  const gift = document.createElement('img');
  gift.src = giftInfo.src;
  gift.classList.add('gift');
  gift.style.left='0px';
  gift.style.top='200px';
  gift.style.width='auto';
  gift.style.height='50px'; // dobbel stÃ¸rrelse, proportionel
  gameArea.appendChild(gift);

  let posX=0;
  const speed=2;
  const interval = setInterval(()=>{
    posX+=speed;
    gift.style.left=posX+'px';
    if(posX>gameArea.offsetWidth){
      gameArea.removeChild(gift);
      currentGiftIndex++;
      setTimeout(spawnGift,500); // nÃ¦ste gave efter 0,5s
      clearInterval(interval);
    }
  },20);

  function removeGift(correct){
    if(correct){
      score++;
    }
    if(gameArea.contains(gift)) gameArea.removeChild(gift);
    currentGiftIndex++;
    clearInterval(interval);
    setTimeout(spawnGift,500);
  }

  // knap funktion
  Object.keys(sackMap).forEach(color=>{
    sackMap[color].onclick = ()=>{
      if(color===giftInfo.color){
        removeGift(true);
      } else {
        removeGift(false);
      }
    }
  });
}

// start spillet
spawnGift();

function endGame(){
  endScreen.style.display='block';
  endScreen.textContent=`ðŸŽ‰ Du sorterede ${score} ud af ${giftData.length} gaver korrekt! ðŸŽ‰`;
}
</script>
</body>
</html>
