<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="UTF-8">
<title>L√•ge 7 ‚Äì Julegave-sortering</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #204226;
    margin: 0;
    padding: 0;
    text-align: center;
    color: white;
  }

  .content-box {
    background-color: white;
    color: black;
    padding: 20px;
    border-radius: 12px;
    max-width: 500px;
    margin: 40px auto;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    position: relative;
  }

  #gameArea {
    position: relative;
    width: 400px;
    height: 400px;
    margin: 0 auto;
    overflow: hidden;
  }

  /* Lagene */
  #bgBack, #bgFront {
    position: absolute;
    top: 0;
    left: 0;
    width: 400px;
    height: 400px;
    z-index: 0;
  }

  #bgFront {
    z-index: 3;
  }

  /* Gaver */
  .gift {
    position: absolute;
    top: 210px; /* b√•ndets h√∏jde */
    z-index: 2;
  }

  /* HUD */
  #hud {
    margin-top: 10px;
    font-weight: bold;
  }

  /* S√¶kke (knapper) */
  .sacks {
    margin-top: 20px;
    display: flex;
    justify-content: center;
    gap: 20px;
  }

  .sacks img {
    width: 60px;
    height: auto;
    cursor: pointer;
    transition: transform 0.2s;
  }

  .sacks img:hover {
    transform: scale(1.1);
  }

  /* Slutsk√¶rm */
  #endScreen {
    display: none;
    margin-top: 20px;
    padding: 12px 20px;
    background: #204226;
    color: white;
    font-weight: bold;
    border-radius: 8px;
    text-align: center;
  }

  .back-button {
    display: inline-block;
    margin-top: 20px;
    padding: 10px 16px;
    background-color: #204226;
    color: white;
    text-decoration: none;
    border-radius: 8px;
    font-weight: bold;
  }

  .back-button:hover {
    background-color: #35663c;
  }
</style>
</head>
<body>
  <h1>Gl√¶delig 7. december ‚Äì Sort√©r julegaverne!</h1>

  <div class="content-box">
    <div id="gameArea">
      <img id="bgBack" src="../assets/SorterMaskineBag.svg" alt="Maskine baggrund">
      <img id="bgFront" src="../assets/SorterMaskineFront.svg" alt="Maskine forgrund">
    </div>

    <div id="hud">Point: <span id="score">0</span></div>

    <div class="sacks">
      <img src="../assets/sorterBl√•S√¶k.svg" alt="Bl√• s√¶k" onclick="sortGift('blue')">
      <img src="../assets/sorterR√∏dS√¶k.svg" alt="R√∏d s√¶k" onclick="sortGift('red')">
      <img src="../assets/sorterGr√∏nS√¶k.svg" alt="Gr√∏n s√¶k" onclick="sortGift('green')">
      <img src="../assets/sorterGulS√¶k.svg" alt="Gul s√¶k" onclick="sortGift('yellow')">
    </div>

    <div id="endScreen"></div>
    <p><a href="../index.html" class="back-button">‚¨Ö Tilbage til kalenderen</a></p>
  </div>

<script>
const gameArea = document.getElementById("gameArea");
const scoreEl = document.getElementById("score");
const endScreen = document.getElementById("endScreen");

const totalGifts = 16;
let giftsSpawned = 0;
let score = 0;
let activeGift = null; // den gave der er ved b√•ndet

// Mulige gaver
const giftTypes = [
  {color:"blue", files:["sorterBl√•1.svg","sorterBl√•2.svg","sorterBl√•3.svg","sorterBl√•4.svg"], sizes:[[26.5,26.5],[34,26.5],[30,18],[19,26.5]]},
  {color:"red", files:["sorterR√∏d1.svg","sorterR√∏d2.svg","sorterR√∏d3.svg","sorterR√∏d4.svg"], sizes:[[26.5,26.5],[34,26.5],[30,18],[19,26.5]]},
  {color:"green", files:["sorterGr√∏n1.svg","sorterGr√∏n2.svg","sorterGr√∏n3.svg","sorterGr√∏n4.svg"], sizes:[[26.5,26.5],[34,26.5],[30,18],[19,26.5]]},
  {color:"yellow", files:["sorterGul1.svg","sorterGul2.svg","sorterGul3.svg","sorterGul4.svg"], sizes:[[26.5,26.5],[34,26.5],[30,18],[19,26.5]]}
];

// Spawn en gave
function spawnGift(){
  if(giftsSpawned >= totalGifts) return;

  const type = giftTypes[Math.floor(Math.random()*giftTypes.length)];
  const index = Math.floor(Math.random()*type.files.length);

  const gift = document.createElement("img");
  gift.src = `../assets/${type.files[index]}`;
  gift.classList.add("gift");
  gift.dataset.color = type.color;

  // st√∏rrelse
  gift.style.width = type.sizes[index][0]*2 + "px";  // dobbelt st√∏rrelse
  gift.style.height = type.sizes[index][1]*2 + "px";

  // startposition
  let giftX = -50;
  gift.style.left = giftX + "px";
  gift.style.top = "210px";
  gameArea.appendChild(gift);

  activeGift = gift;
  giftsSpawned++;

  const speed = 2; // pixels pr. frame
  const interval = setInterval(()=>{
    giftX += speed;
    gift.style.left = giftX + "px";

    if(giftX > 400){ // udenfor h√∏jre side
      if(gameArea.contains(gift)) gameArea.removeChild(gift);
      activeGift = null;
      clearInterval(interval);
      if(giftsSpawned < totalGifts){
        setTimeout(spawnGift, 800);
      } else {
        setTimeout(endGame, 1000);
      }
    }
  },20);
}

// Sort√©r gave
function sortGift(color){
  if(activeGift && activeGift.dataset.color === color){
    score++;
    scoreEl.textContent = score;
    if(gameArea.contains(activeGift)) gameArea.removeChild(activeGift);
    activeGift = null;
    if(giftsSpawned < totalGifts){
      setTimeout(spawnGift, 500);
    } else {
      endGame();
    }
  }
}

function endGame(){
  endScreen.style.display = "block";
  endScreen.textContent = `üéâ Du sorterede ${score} ud af ${totalGifts} gaver korrekt! üéâ`;
}

spawnGift();
</script>
</body>
</html>
