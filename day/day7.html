<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="UTF-8">
<title>LÃ¥ge 7 â€“ Sorter gaverne</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #204226;
  margin: 0;
  padding: 0;
  text-align: center;
  color: white;
}

.content-box {
  background-color: white;
  color: black;
  padding: 20px;
  border-radius: 12px;
  max-width: 500px;
  margin: 40px auto;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  position: relative;
}

#gameArea {
  position: relative;
  width: 400px;
  height: 400px;
  margin: 0 auto;
  overflow: hidden;
}

#maskineBaggrund, #maskineFront {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.gave {
  position: absolute;
  top: 200px;
  z-index:1;
}

.sack {
  position: absolute;
  bottom: 10px;
  cursor: pointer;
  z-index:5;
}

.controls {
  margin-top: 20px;
  display: flex;
  justify-content: center;
  gap: 20px;
}

.back-button {
  display: inline-block;
  margin-top: 20px;
  padding: 10px 16px;
  background-color: #204226;
  color: white;
  text-decoration: none;
  border-radius: 8px;
  font-weight: bold;
}

.back-button:hover {
  background-color: #35663c;
}

#endScreen {
  display:none;
  padding: 12px 20px;
  background: #204226;
  color: white;
  font-weight: bold;
  border-radius: 8px;
  text-align:center;
  margin-top: 10px;
}
</style>
</head>
<body>
<h1>GlÃ¦delig 7. december â€“ Sorter gaverne!</h1>

<div class="content-box">
  <div id="gameArea">
    <img id="maskineBaggrund" src="../assets/sorterMaskineBag.svg" alt="Maskine Baggrund">
    <img id="maskineFront" src="../assets/sorterMaskineFront.svg" alt="Maskine Front">

    <!-- SÃ¦kke -->
    <img id="sackBlÃ¥" class="sack" src="../assets/sorterBlÃ¥SÃ¦k.svg" style="left:20px;">
    <img id="sackRÃ¸d" class="sack" src="../assets/sorterRÃ¸dSÃ¦k.svg" style="left:120px;">
    <img id="sackGul" class="sack" src="../assets/sorterGulSÃ¦k.svg" style="left:220px;">
    <img id="sackGrÃ¸n" class="sack" src="../assets/sorterGrÃ¸nSÃ¦k.svg" style="left:320px;">
  </div>

  <div id="endScreen"></div>

  <p><a href="../index.html" class="back-button">â¬… Tilbage til kalenderen</a></p>
</div>

<script>
// Konfiguration
const gaveFarver = ["blÃ¥","rÃ¸d","gul","grÃ¸n"];
const gaverPerFarve = 4;
const gaveBredde = [26.5,34,30,19];
const gaveHÃ¸jde = [26.5,26.5,18,26.5];
const gaveTotal = gaverPerFarve*gaveFarver.length;
const gaveY = 200; // bÃ¥ndets Y
const gaveHastighed = 1.5; // px per frame
const spawnDelay = 1000; // ms mellem gaver

let score = 0;
let gaverSpawnet = 0;
const gameArea = document.getElementById("gameArea");
const endScreen = document.getElementById("endScreen");

// SÃ¦kke map
const sackMap = {
  blÃ¥: document.getElementById("sackBlÃ¥"),
  rÃ¸d: document.getElementById("sackRÃ¸d"),
  gul: document.getElementById("sackGul"),
  grÃ¸n: document.getElementById("sackGrÃ¸n")
};

// TilfÃ¸j klik-event pÃ¥ sÃ¦kke
gaveFarver.forEach(f => {
  sackMap[f].addEventListener("click", () => handleSackClick(f));
});

let activeGave = null;

function spawnGave() {
  if(gaverSpawnet >= gaveTotal) return;

  gaverSpawnet++;
  const farve = gaveFarver[Math.floor(Math.random()*gaveFarver.length)];
  const stÃ¸rrelse = Math.floor(Math.random()*4); // 0-3
  const gave = document.createElement("img");
  gave.src = `../assets/sorter${farve}${stÃ¸rrelse+1}.svg`;
  gave.classList.add("gave");
  gave.style.width = gaveBredde[stÃ¸rrelse]*2 + "px"; // dobbelt stÃ¸rrelse
  gave.style.height = gaveHÃ¸jde[stÃ¸rrelse]*2 + "px";
  gave.style.top = gaveY + "px";
  gave.style.left = "-50px";
  gave.dataset.farve = farve;
  gameArea.appendChild(gave);

  activeGave = gave;
  moveGave(gave);
}

// BevÃ¦g gave
function moveGave(gave){
  const interval = setInterval(() => {
    let left = parseFloat(gave.style.left);
    left += gaveHastighed;
    gave.style.left = left + "px";

    if(left > gameArea.offsetWidth){
      // gaven er ude af billedet
      gameArea.removeChild(gave);
      activeGave = null;
      clearInterval(interval);
      checkEnd();
      // spawn nÃ¦ste gave
      setTimeout(spawnGave, spawnDelay);
    }
  }, 20);
}

// HÃ¥ndter klik pÃ¥ sÃ¦k
function handleSackClick(farve){
  if(!activeGave) return;
  if(activeGave.dataset.farve === farve){
    // korrekt
    score++;
    gameArea.removeChild(activeGave);
    activeGave = null;
    checkEnd();
    setTimeout(spawnGave, spawnDelay);
  } else {
    // forkert, gaven fortsÃ¦tter bare
  }
}

// Tjek om spillet er slut
function checkEnd(){
  if(score >= gaveTotal || gaverSpawnet >= gaveTotal && !activeGave){
    endScreen.style.display = "block";
    endScreen.textContent = `ðŸŽ‰ Tillykke! Du sorterede ${score} ud af ${gaveTotal} gaver! ðŸŽ‰`;
  }
}

// Start spillet
spawnGave();
</script>
</body>
</html>
