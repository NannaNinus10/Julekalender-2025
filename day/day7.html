<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="UTF-8">
<title>L√•ge 7 ‚Äì Sorter gaverne</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #204226;
    margin: 0;
    padding: 0;
    color: white;
    text-align: center;
  }
  .content-box {
    background-color: white;
    color: black;
    padding: 20px;
    border-radius: 12px;
    max-width: 500px;
    margin: 40px auto;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    position: relative;
  }
  #gameArea {
    position: relative;
    width: 400px;
    height: 400px;
    margin: 0 auto;
    overflow: hidden;
  }
  #maskineBag, #maskineFront {
    width: 100%;
    position: absolute;
    top: 0;
    left: 0;
  }
  #maskineFront {
    z-index: 4;
    pointer-events: none; /* g√∏r fronten klik-gennem */
  }
  .gift {
    position: absolute;
    top: 200px; /* alle gaver p√• samme Y-v√¶rdi */
    width: 15px;  /* halv st√∏rrelse af tidligere */
    height: 15px;
    z-index: 2;
  }
  .sack {
    position: absolute;
    bottom: 10px;
    width: 50px;
    height: 70px;
    cursor: pointer;
    z-index: 5; /* ovenp√• front */
  }
  .sacks {
    display: flex;
    justify-content: space-between;
    width: 400px;
    margin: 0 auto;
    position: relative;
    top: 10px;
  }
  #endScreen {
    display: none;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%,-50%);
    background: #204226;
    color: white;
    padding: 15px;
    border-radius: 8px;
    font-weight: bold;
    z-index: 10;
  }
  .back-button {
    display: inline-block;
    margin-top: 15px;
    padding: 10px 16px;
    background-color: #204226;
    color: white;
    text-decoration: none;
    border-radius: 8px;
    font-weight: bold;
  }
  .back-button:hover { background-color: #35663c; }
</style>
</head>
<body>
<h1>Gl√¶delig 7. december ‚Äì Sorter gaverne!</h1>
<div class="content-box">
  <div id="gameArea">
    <img src="../assets/sorterMaskineBag.svg" id="maskineBag" alt="Maskine baggrund">
    <div class="sacks">
      <img src="../assets/sorterR√∏dS√¶k.svg" class="sack" data-color="r√∏d">
      <img src="../assets/sorterGr√∏nS√¶k.svg" class="sack" data-color="gr√∏n">
      <img src="../assets/sorterGulS√¶k.svg" class="sack" data-color="gul">
      <img src="../assets/sorterBl√•S√¶k.svg" class="sack" data-color="bl√•">
    </div>
    <img src="../assets/sorterMaskineFront.svg" id="maskineFront" alt="Maskine front">
    <div id="endScreen"></div>
  </div>
  <p><a href="../index.html" class="back-button">‚¨Ö Tilbage til kalenderen</a></p>
</div>

<script>
const colors = ["r√∏d","gr√∏n","gul","bl√•"];
let gifts = [];
const totalGifts = 16;
let score = 0;
const endScreen = document.getElementById("endScreen");
const gameArea = document.getElementById("gameArea");

// Opret gaver i random r√¶kkef√∏lge
for(let c=0;c<colors.length;c++){
  for(let i=1;i<=4;i++){
    gifts.push({color: colors[c], img: `../assets/sorter${colors[c]}${i}.svg`});
  }
}
gifts = gifts.sort(()=>Math.random()-0.5);

// Start position
let currentGift = 0;

// Bev√¶gelse
function spawnGift() {
  if(currentGift >= gifts.length) return;
  const g = gifts[currentGift];
  const img = document.createElement("img");
  img.src = g.img;
  img.classList.add("gift");
  img.style.left = "-20px";
  img.dataset.color = g.color;
  gameArea.appendChild(img);

  const moveInterval = setInterval(()=>{
    let left = parseFloat(img.style.left);
    left += 1.5; // hastighed
    img.style.left = left + "px";

    if(left > gameArea.offsetWidth){
      img.remove();
      clearInterval(moveInterval);
      nextGift();
    }
  },20);

  img.dataset.interval = moveInterval;
  currentGift++;
}

// S√¶k click
document.querySelectorAll(".sack").forEach(s=>{
  s.addEventListener("click", ()=>{
    const gift = document.querySelector(".gift");
    if(!gift) return;
    if(gift.dataset.color === s.dataset.color){
      score++;
      gift.remove();
      clearInterval(gift.dataset.interval);
      nextGift();
    } else {
      gift.remove();
      clearInterval(gift.dataset.interval);
      nextGift();
    }
  });
});

function nextGift(){
  if(document.querySelectorAll(".gift").length===0 && currentGift>=gifts.length){
    endScreen.style.display="block";
    endScreen.textContent = `üéâ Du sorterede ${score} ud af ${totalGifts} gaver! üéâ`;
  } else {
    spawnGift();
  }
}

// Start spil
spawnGift();
</script>
</body>
</html>
